(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{12:function(t,e,r){"use strict";var n=r(4),c={addContactRequest:Object(n.b)("contacts/addRequest"),addContactSuccess:Object(n.b)("contacts/addSuccess"),addContactError:Object(n.b)("contacts/addError"),fetchContactsRequest:Object(n.b)("contacts/fetchRequest"),fetchContactsSuccess:Object(n.b)("contacts/fetchSuccess"),fetchContactsError:Object(n.b)("contacts/fetchError"),removeContactRequest:Object(n.b)("contacts/removeRequest"),removeContactSuccess:Object(n.b)("contacts/removeSuccess"),removeContactError:Object(n.b)("contacts/removeError"),changeFilter:Object(n.b)("contacts/changeFilter"),showModalWarning:Object(n.b)("contacts/modalWarning")};e.a=c},121:function(t,e,r){},122:function(t,e,r){"use strict";r.r(e);var n=r(2),c=r(0),o=r(25),a=r.n(o),s=r(21),u=r(66),i=r(13),l=r(51),b=r(52),j=r(54),g=r(53),O=r(23),d=r(8),f={container:{width:"80vw",marginLeft:"auto",marginRight:"auto",padding:"0 24px"}},h=function(t){var e=t.children;return Object(n.jsx)("div",{style:f.container,children:e})},p=r(22),m=function(t){function e(e){return Object(n.jsx)(t,Object(i.a)({},e))}return Object(s.b)((function(t){return{isLogged:p.b.isLogIn(t)}}))(e)},x={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B",fontSize:20,fontFamily:"Roboto, sans-serif"},activeLink:{color:"#E84A5F"}},v=m((function(t){var e=t.isLogged;return Object(n.jsxs)("nav",{children:[Object(n.jsx)(O.b,{to:"/",exact:!0,style:x.link,activeStyle:x.activeLink,children:"Home"}),e&&Object(n.jsx)(O.b,{to:"/contacts",exact:!0,style:x.link,activeStyle:x.activeLink,children:"Contacts"})]})})),y=r(39),S=r.n(y),C=r(40),E=r.n(C);var L,R,k=function(){return Object(n.jsx)(S.a,{className:E.a.LoaderRed,type:"Circles",color:"red",height:28,width:28})},q=r(137),U=r.p+"static/media/avatar.da05b2b0.png",w={container:{display:"flex",alignItems:"center",marginRight:12},avatar:{marginRight:4},name:{fontWeight:700,marginRight:8,fontSize:14,fontFamily:" sans-serif",color:"grey"},username:{fontWeight:700,fontSize:14,fontFamily:" sans-serif",marginRight:14}},z={onLogout:p.a.logOut},F=Object(s.b)((function(t){return{name:p.b.getUserName(t),isLoading:p.b.getLoading(t)}}),z)((function(t){var e=t.avatar,r=t.name,c=t.onLogout,o=t.isLoading;return Object(n.jsxs)("div",{style:w.container,children:[!o&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:U,alt:"Avatar",width:"32",style:w.avatar}),Object(n.jsx)("span",{style:w.name,children:"Welcome,"}),Object(n.jsxs)("span",{style:w.username,children:[e,r]}),Object(n.jsx)(q.a,{type:"button",onClick:c,variant:"contained",color:"secondary",children:"Logout"})]}),o&&Object(n.jsx)(k,{})]})})),W={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B",fontSize:20,fontFamily:"Roboto, sans-serif"},activeLink:{color:"#E84A5F"}},A=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(O.b,{to:"/register",exact:!0,style:W.link,activeStyle:W.activeLink,children:"Register"}),Object(n.jsx)(O.b,{to:"/login",exact:!0,style:W.link,activeStyle:W.activeLink,children:"Login"})]})},I={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B",padding:8}},P=Object(s.b)((function(t){return{inLogged:p.b.isLogIn(t)}}))((function(t){var e=t.inLogged;return Object(n.jsxs)("header",{style:I.header,children:[Object(n.jsx)(v,{}),e?Object(n.jsx)(F,{}):Object(n.jsx)(A,{})]})})),_=r(42),B=m((function(t){var e=t.component,r=t.isLogged,c=Object(_.a)(t,["component","isLogged"]);return Object(n.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return r?Object(n.jsx)(e,Object(i.a)({},t)):Object(n.jsx)(d.a,{to:"/"})}}))})),M=m((function(t){var e=t.component,r=t.isLogged,c=t.restricted,o=Object(_.a)(t,["component","isLogged","restricted"]);return Object(n.jsx)(d.b,Object(i.a)(Object(i.a)({},o),{},{render:function(t){return r&&c?Object(n.jsx)(d.a,{to:"/contacts"}):Object(n.jsx)(e,Object(i.a)({},t))}}))})),N=[{path:"/",label:"Home",exact:!0,component:Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(8)]).then(r.bind(null,167))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,168))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,169))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(c.lazy)((function(){return Promise.all([r.e(5),r.e(4)]).then(r.bind(null,172))})),private:!0,restricted:!1}],D=r(55),G=function(t){Object(j.a)(r,t);var e=Object(g.a)(r);function r(){return Object(l.a)(this,r),e.apply(this,arguments)}return Object(b.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(n.jsx)(O.a,{children:Object(n.jsxs)(h,{children:[Object(n.jsx)(P,{}),Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)(D.a,{}),children:Object(n.jsxs)(d.d,{children:[N.map((function(t){return t.private?Object(n.jsx)(B,Object(i.a)({},t),t.label):Object(n.jsx)(M,Object(i.a)(Object(i.a)({},t),{},{restricted:t.restricted}),t.label)})),Object(n.jsx)(d.a,{to:"/"})]})})]})})}}]),r}(c.Component),H=Object(s.b)(null,{onGetCurrentUser:p.a.getCurrentUser})(G),J=r(4),T=r(50),Y=r(67),K=r.n(Y),Q=r(32),V=r(3),X=r(68),Z=r(10),$=r(12),tt=Object(J.c)([],(L={},Object(V.a)(L,$.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(V.a)(L,$.a.addContactSuccess,(function(t,e){return[].concat(Object(X.a)(t),[e.payload])})),Object(V.a)(L,$.a.removeContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),L)),et=Object(J.c)("",Object(V.a)({},$.a.changeFilter,(function(t,e){return e.payload}))),rt=Object(J.c)(!1,Object(V.a)({},$.a.showModalWarning,(function(t,e){return!t}))),nt=Object(J.c)(!1,(R={},Object(V.a)(R,$.a.addContactRequest,(function(){return!0})),Object(V.a)(R,$.a.addContactSuccess,(function(){return!1})),Object(V.a)(R,$.a.addContactError,(function(){return!1})),Object(V.a)(R,$.a.fetchContactsRequest,(function(){return!0})),Object(V.a)(R,$.a.fetchContactsSuccess,(function(){return!1})),Object(V.a)(R,$.a.fetchContactsError,(function(){return!1})),Object(V.a)(R,$.a.removeContactRequest,(function(){return!0})),Object(V.a)(R,$.a.removeContactSuccess,(function(){return!1})),Object(V.a)(R,$.a.removeContactError,(function(){return!1})),R)),ct=Object(Z.c)({contactsItems:tt,filter:et,modalWarning:rt,loading:nt}),ot=r(37),at={key:"auth",storage:K.a,whitelist:["token"]},st=Object(J.a)({reducer:{contacts:ct,auth:Object(T.a)(at,ot.a)},middleware:[Q.a]}),ut=Object(T.b)(st);r(121);a.a.render(Object(n.jsx)(s.a,{store:st,children:Object(n.jsx)(u.a,{loading:null,persistor:ut,children:Object(n.jsx)(H,{})})}),document.querySelector("#root"))},22:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return l}));var n=r(26),c=r.n(n),o=r(5),a=r(20);r(70),r(71);c.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var s=function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},u=function(){c.a.defaults.headers.common.Authorization=""},i={register:function(t){return function(e){e(o.a.registerRequest()),c.a.post("/users/signup",t).then((function(t){s(t.data.token),e(o.a.registerSuccess(t.data)),201===t.status&&Object(a.success)({title:"Success",text:"User created!"})})).catch((function(t){e(o.a.registerError(t.message)),400===t.response.status?Object(a.error)({title:"Error",text:"User creation error! Please try again!"}):500===t.response.status?Object(a.error)({title:"Error",text:"Oops! Server error! Please try later!"}):Object(a.error)({title:"Error",text:"Something went wrong!"})}))}},logIn:function(t){return function(e){e(o.a.loginRequest()),c.a.post("/users/login",t).then((function(t){s(t.data.token),e(o.a.loginSuccess(t.data)),200===t.status&&Object(a.success)({title:"Success",text:"You are successfully logged in"})})).catch((function(t){e(o.a.loginError(t)),t&&Object(a.error)({title:"Error",text:"Login error! Try again!"})}))}},logOut:function(){return function(t){t(o.a.logoutRequest()),c.a.post("/users/logout").then((function(e){u(),t(o.a.logoutSuccess(e)),200===e.status&&Object(a.info)({title:"Info",text:"User is logged out"})})).catch((function(e){t(o.a.logoutError(e.message)),401===e.response.status?Object(a.error)({title:"Error",text:"Missing header with authorization token! Please try again!"}):500===e.response.status?Object(a.error)({title:"Error",text:"Oops! Server error! Please try later!"}):Object(a.error)({title:"Error",text:"Something went wrong!"})}))}},getCurrentUser:function(){return function(t,e){var r=e().auth.token;r&&(s(r),t(o.a.getCurrentUserRequest),c.a.get("/users/current").then((function(e){var r=e.data;return t(o.a.getCurrentUserSuccess(r))})).catch((function(e){return t(o.a.getCurrentUserError(e.message))})))}}},l=(r(37),{isLogIn:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name},getLoading:function(t){return t.auth.loading},getError:function(t){return t.auth.error}})},37:function(t,e,r){"use strict";var n,c,o,a,s=r(3),u=r(10),i=r(4),l=r(5),b={name:null,email:null},j=Object(i.c)(b,(n={},Object(s.a)(n,l.a.registerSuccess,(function(t,e){return e.payload.user})),Object(s.a)(n,l.a.loginSuccess,(function(t,e){return e.payload.user})),Object(s.a)(n,l.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(s.a)(n,l.a.logoutSuccess,(function(){return b})),n)),g=Object(i.c)(null,(c={},Object(s.a)(c,l.a.registerSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,l.a.loginSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,l.a.logoutSuccess,(function(){return null})),c)),O=Object(i.c)(null,(o={},Object(s.a)(o,l.a.registerError,(function(t,e){return e.payload})),Object(s.a)(o,l.a.loginError,(function(t,e){return e.payload})),Object(s.a)(o,l.a.logoutError,(function(t,e){return e.payload})),Object(s.a)(o,l.a.getCurrentUserError,(function(t,e){return e.payload})),o)),d=Object(i.c)(!1,(a={},Object(s.a)(a,l.a.registerRequest,(function(){return!0})),Object(s.a)(a,l.a.registerSuccess,(function(){return!1})),Object(s.a)(a,l.a.registerError,(function(){return!1})),Object(s.a)(a,l.a.loginRequest,(function(){return!0})),Object(s.a)(a,l.a.loginSuccess,(function(){return!1})),Object(s.a)(a,l.a.loginError,(function(){return!1})),Object(s.a)(a,l.a.logoutRequest,(function(){return!0})),Object(s.a)(a,l.a.logoutSuccess,(function(){return!1})),Object(s.a)(a,l.a.logoutError,(function(){return!1})),Object(s.a)(a,l.a.getCurrentUserRequest,(function(){return!0})),Object(s.a)(a,l.a.getCurrentUserSuccess,(function(){return!1})),Object(s.a)(a,l.a.getCurrentUserError,(function(){return!1})),a));e.a=Object(u.c)({user:j,token:g,error:O,loading:d})},40:function(t,e,r){t.exports={Loader:"Loader_Loader__3O153",LoaderRed:"Loader_LoaderRed__3yWLO"}},5:function(t,e,r){"use strict";var n=r(4),c={registerRequest:Object(n.b)("auth/registerRequest"),registerSuccess:Object(n.b)("auth/registerSuccess"),registerError:Object(n.b)("auth/registerError"),loginRequest:Object(n.b)("auth/loginRequest"),loginSuccess:Object(n.b)("auth/loginSuccess"),loginError:Object(n.b)("auth/loginError"),logoutRequest:Object(n.b)("auth/logoutRequest"),logoutSuccess:Object(n.b)("auth/logoutSuccess"),logoutError:Object(n.b)("auth/logoutError"),getCurrentUserRequest:Object(n.b)("auth/getCurrentContactRequest"),getCurrentUserSuccess:Object(n.b)("auth/getCurrentContactSuccess"),getCurrentUserError:Object(n.b)("auth/getCurrentContactError")};e.a=c},55:function(t,e,r){"use strict";var n=r(2),c=(r(0),r(39)),o=r.n(c),a=r(40),s=r.n(a);e.a=function(){return Object(n.jsx)(o.a,{className:s.a.Loader,type:"Circles",color:"#87cefa",height:40,width:40})}}},[[122,2,3]]]);
//# sourceMappingURL=main.534bd744.chunk.js.map