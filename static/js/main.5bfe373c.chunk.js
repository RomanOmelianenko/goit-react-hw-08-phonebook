(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{17:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i}));var c=n(18),r=n.n(c),a=n(5);r.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var o=function(t){r.a.defaults.headers.common.Authorization="Bearer ".concat(t)},u=function(){r.a.defaults.headers.common.Authorization=""},s={register:function(t){return function(e){e(a.a.registerRequest()),r.a.post("/users/signup",t).then((function(t){o(t.data.token),e(a.a.registerSuccess(t.data))})).catch((function(t){return e(a.a.registerError(t.message))}))}},logIn:function(t){return function(e){e(a.a.loginRequest()),r.a.post("/users/login",t).then((function(t){o(t.data.token),e(a.a.loginSuccess(t.data))})).catch((function(t){return e(a.a.loginError(t))}))}},logOut:function(){return function(t){t(a.a.logoutRequest()),r.a.post("/users/logout").then((function(){u(),t(a.a.logoutSuccess())})).catch((function(e){return t(a.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(o(n),t(a.a.getCurrentUserRequest),r.a.get("/users/current").then((function(e){var n=e.data;return t(a.a.getCurrentUserSuccess(n))})).catch((function(e){return t(a.a.getCurrentUserError(e.message))})))}}},i=(n(25),{isLogIn:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name}})},25:function(t,e,n){"use strict";var c,r,a,o=n(3),u=n(7),s=n(2),i=n(5),b={name:null,email:null},l=Object(s.c)(b,(c={},Object(o.a)(c,i.a.registerSuccess,(function(t,e){return e.payload.user})),Object(o.a)(c,i.a.loginSuccess,(function(t,e){return e.payload.user})),Object(o.a)(c,i.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(o.a)(c,i.a.logoutSuccess,(function(){return b})),c)),j=Object(s.c)(null,(r={},Object(o.a)(r,i.a.registerSuccess,(function(t,e){return e.payload.token})),Object(o.a)(r,i.a.loginSuccess,(function(t,e){return e.payload.token})),Object(o.a)(r,i.a.logoutSuccess,(function(){return null})),r)),g=Object(s.c)(null,(a={},Object(o.a)(a,i.a.registerError,(function(t,e){return e.payload})),Object(o.a)(a,i.a.loginError,(function(t,e){return e.payload})),Object(o.a)(a,i.a.logoutError,(function(t,e){return e.payload})),Object(o.a)(a,i.a.getCurrentUserError,(function(t,e){return e.payload})),a));e.a=Object(u.c)({user:l,token:j,error:g})},5:function(t,e,n){"use strict";var c=n(2),r={registerRequest:Object(c.b)("auth/registerRequest"),registerSuccess:Object(c.b)("auth/registerSuccess"),registerError:Object(c.b)("auth/registerError"),loginRequest:Object(c.b)("auth/loginRequest"),loginSuccess:Object(c.b)("auth/loginSuccess"),loginError:Object(c.b)("auth/loginError"),logoutRequest:Object(c.b)("auth/logoutRequest"),logoutSuccess:Object(c.b)("auth/logoutSuccess"),logoutError:Object(c.b)("auth/logoutError"),getCurrentUserRequest:Object(c.b)("auth/getCurrentContactRequest"),getCurrentUserSuccess:Object(c.b)("auth/getCurrentContactSuccess"),getCurrentUserError:Object(c.b)("auth/getCurrentContactError")};e.a=r},8:function(t,e,n){"use strict";var c=n(2),r={addContactRequest:Object(c.b)("contacts/addRequest"),addContactSuccess:Object(c.b)("contacts/addSuccess"),addContactError:Object(c.b)("contacts/addError"),fetchContactsRequest:Object(c.b)("contacts/fetchRequest"),fetchContactsSuccess:Object(c.b)("contacts/fetchSuccess"),fetchContactsError:Object(c.b)("contacts/fetchError"),removeContactRequest:Object(c.b)("contacts/removeRequest"),removeContactSuccess:Object(c.b)("contacts/removeSuccess"),removeContactError:Object(c.b)("contacts/removeError"),changeFilter:Object(c.b)("contacts/changeFilter"),showModalWarning:Object(c.b)("contacts/modalWarning")};e.a=r},80:function(t,e,n){"use strict";n.r(e);var c,r,a=n(1),o=n(0),u=n(22),s=n.n(u),i=n(15),b=n(47),l=n(10),j=n(33),g=n(34),d=n(36),O=n(35),f=n(16),h=n(6),p=n(17),m=function(t){function e(e){return Object(a.jsx)(t,Object(l.a)({},e))}return Object(i.b)((function(t){return{isLogged:p.b.isLogIn(t)}}))(e)},v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},x=m((function(t){var e=t.isLogged;return Object(a.jsxs)("nav",{children:[Object(a.jsx)(f.b,{to:"/",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Home"}),e&&Object(a.jsx)(f.b,{to:"/contacts",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Contacts"})]})})),C={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},y={onLogout:p.a.logOut},S=Object(i.b)((function(t){return{name:p.b.getUserName(t),avatar:""}}),y)((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(a.jsxs)("div",{style:C.container,children:[Object(a.jsx)("img",{src:e,alt:"",width:"32",style:C.avatar}),Object(a.jsxs)("span",{style:C.name,children:["Welcome, ",n]}),Object(a.jsx)("button",{type:"button",onClick:c,children:"Logout"})]})})),k={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},E=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(f.b,{to:"/register",exact:!0,style:k.link,activeStyle:k.activeLink,children:"Register"}),Object(a.jsx)(f.b,{to:"/login",exact:!0,style:k.link,activeStyle:k.activeLink,children:"Login"})]})},R={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},L=Object(i.b)((function(t){return{inLogged:p.b.isLogIn(t)}}))((function(t){var e=t.inLogged;return Object(a.jsxs)("header",{style:R.header,children:[Object(a.jsx)(x,{}),e?Object(a.jsx)(S,{}):Object(a.jsx)(E,{})]})})),q={container:{width:"80vw",marginLeft:"auto",marginRight:"auto",padding:"0 24px"}},U=function(t){var e=t.children;return Object(a.jsxs)("div",{style:q.container,children:[Object(a.jsx)(L,{}),e]})},w=n(26),W=m((function(t){var e=t.component,n=t.isLogged,c=Object(w.a)(t,["component","isLogged"]);return Object(a.jsx)(h.b,Object(l.a)(Object(l.a)({},c),{},{render:function(t){return n?Object(a.jsx)(e,Object(l.a)({},t)):Object(a.jsx)(h.a,{to:"/login"})}}))})),A=m((function(t){var e=t.component,n=t.isLogged,c=t.restricted,r=Object(w.a)(t,["component","isLogged","restricted"]);return Object(a.jsx)(h.b,Object(l.a)(Object(l.a)({},r),{},{render:function(t){return n&&c?Object(a.jsx)(h.a,{to:"/contacts"}):Object(a.jsx)(e,Object(l.a)({},t))}}))})),I=[{path:"/",label:"Home",exact:!0,component:Object(o.lazy)((function(){return n.e(5).then(n.bind(null,87))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(o.lazy)((function(){return n.e(7).then(n.bind(null,88))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(o.lazy)((function(){return n.e(6).then(n.bind(null,89))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(o.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,90))})),private:!0,restricted:!1}],z=function(t){Object(d.a)(n,t);var e=Object(O.a)(n);function n(){return Object(j.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(a.jsx)(f.a,{children:Object(a.jsx)(U,{children:Object(a.jsx)(o.Suspense,{fallback:Object(a.jsx)("h1",{children:"Loading..."}),children:Object(a.jsx)(h.d,{children:I.map((function(t){return t.private?Object(a.jsx)(W,Object(l.a)({},t),t.label):Object(a.jsx)(A,Object(l.a)(Object(l.a)({},t),{},{restricted:t.restricted}),t.label)}))})})})})}}]),n}(o.Component),B=Object(i.b)(null,{onGetCurrentUser:p.a.getCurrentUser})(z),F=n(2),D=n(32),M=n(48),G=n.n(M),H=n(21),J=n(3),N=n(49),P=n(7),K=n(8),Q=Object(F.c)([],(c={},Object(J.a)(c,K.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(J.a)(c,K.a.addContactSuccess,(function(t,e){return[].concat(Object(N.a)(t),[e.payload])})),Object(J.a)(c,K.a.removeContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),c)),T=Object(F.c)("",Object(J.a)({},K.a.changeFilter,(function(t,e){return e.payload}))),V=Object(F.c)(!1,Object(J.a)({},K.a.showModalWarning,(function(t,e){return!t}))),X=Object(F.c)(!1,(r={},Object(J.a)(r,K.a.addContactRequest,(function(){return!0})),Object(J.a)(r,K.a.addContactSuccess,(function(){return!1})),Object(J.a)(r,K.a.addContactError,(function(){return!1})),Object(J.a)(r,K.a.fetchContactsRequest,(function(){return!0})),Object(J.a)(r,K.a.fetchContactsSuccess,(function(){return!1})),Object(J.a)(r,K.a.fetchContactsError,(function(){return!1})),Object(J.a)(r,K.a.removeContactRequest,(function(){return!0})),Object(J.a)(r,K.a.removeContactSuccess,(function(){return!1})),Object(J.a)(r,K.a.removeContactError,(function(){return!1})),r)),Y=Object(P.c)({contactsItems:Q,filter:T,modalWarning:V,loading:X}),Z=n(25),$={key:"auth",storage:G.a,whitelist:["token"]},_=Object(F.a)({reducer:{contacts:Y,auth:Object(D.a)($,Z.a)},middleware:[H.a]}),tt=Object(D.b)(_);s.a.render(Object(a.jsx)(i.a,{store:_,children:Object(a.jsx)(b.a,{loading:null,persistor:tt,children:Object(a.jsx)(B,{})})}),document.querySelector("#root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.5bfe373c.chunk.js.map